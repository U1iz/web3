/* 标题变更 */ window.addEventListener('DOMContentLoaded', beforeLoaded); function beforeLoaded() { { if (!document.querySelector('.beforeLoading_stye')) { let sn = document.createElement('style'); sn.innerText = '#beforeLoading_wrap{position:fixed;top:0;left:0;width:100%;height:100%;background:#ccc;z-index:10;}#beforeLoading_msg{position:relative;left:calc(50% - 3.6rem);top:calc(50% - 1.2rem);padding:1.2rem 3.6rem;text-align:center;background:#fff;}'; document.head.appendChild(sn); sn.id = 'beforeLoading_stye'; } } let tit = document.querySelector('title'); let od = tit.innerText; sessionStorage.setItem('pageTitle', od); let timer1; let timer2; let timer3; let timer4; let timer5; timer1 = setTimeout(function () { tit.innerHTML = '尽力加载中，请耐心等待'; timer2 = setTimeout(() => { tit.innerHTML = '尽力加载中，请耐心等待.'; timer3 = setTimeout(() => { tit.innerHTML = '尽力加载中，请耐心等待..'; timer4 = setTimeout(() => { tit.innerHTML = '尽力加载中，请耐心等待...'; setTimeout(() => { tit.innerHTML = sessionStorage.getItem('pageTitle'); }, 3000); }, 720); }, 720); }, 720); }, 5000); /* 页面变更 */ let div = document.createElement('div'); let span = document.createElement('span'); div.id = 'beforeLoading_wrap'; span.id = 'beforeLoading_msg'; span.innerHTML = '加载中...'; span.zIndex = 999; document.body.appendChild(div); div.appendChild(span); let spanValue = '加载中'; timer5 = setInterval(function () { spanValue += '.'; if (spanValue.length == 7) { spanValue = '加载中'; } span.style.left = 'calc(50% - ' + span.getBoundingClientRect().width / 2 + 'px)'; span.innerHTML = spanValue; }, 500); window.addEventListener('load', function () { div.remove(); clearInterval(timer1); clearInterval(timer2); clearInterval(timer3); clearInterval(timer4); clearInterval(timer5); if (sessionStorage.getItem('pageTitle') != null) { tit.innerText = sessionStorage.getItem('pageTitle'); } window.removeEventListener('DOMContentLoaded', beforeLoaded); }); }