if (localStorage.getItem('equipmentType') == 2) { let styles = '.svdPlaying { margin: 0; padding: 0; overflow: hidden; } video { position: -webkit-sticky; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2}'; let styNode = document.createElement('style'); styNode.innerText = styles; document.head.appendChild(styNode); document.body.className += ' svdPlaying'; let svd_wrap = document.createElement('div'); document.body.appendChild(svd_wrap); svd_wrap.innerHTML = '<video id="svd" src="" muted autoplay></video>'; let vid = document.querySelector('#svd'); vid.setAttribute('muted', 'muted'); vid.setAttribute('autoplay', 'autoplay'); vid.setAttribute('src', 'http://96yzl.usa3v.vip/media/startVideo.mp4'); vid.addEventListener('loadedmetadata', () => { console.log("视频的总长度: " + vid.duration); console.log(vid); }); window.addEventListener('click', () => { vid.play(); }); /* vid.addEventListener('play', ()=>{ console.log("视频开始播放"); }); vid.addEventListener('playing', ()=>{ console.log("视频播放中"); }); vid.addEventListener('waiting', ()=>{ console.log("加载中"); }); vid.addEventListener('pause', ()=>{ console.log("暂停播放"); }); */ vid.addEventListener('ended', () => { console.log("播放结束"); setTimeout(() => { svd_wrap.remove(); document.body.className = document.body.getAttribute('class').replace(/svdPlaying/g, ''); }, 300); }, false); }